ARG SPARK_VERSION=3.0.1
ARG HADOOP_VERSION=2.7
ARG SCALA_VERSION=2.12

FROM michalklempa/spark:${SPARK_VERSION}-hadoop${HADOOP_VERSION}
ARG SPARK_VERSION
ARG HADOOP_VERSION
ARG SCALA_VERSION
ARG ARG_JAR=spark-sql-example-1.0.0-SNAPSHOT.jar
ARG ARG_MAIN_CLASS=com.michalklempa.spark.sql.example.Main

# -Dlog4j.configurationFile=${PROJECT_HOME}/conf/log4j2.xml

ENV PROJECT_BASE_DIR /opt/spark
ENV PROJECT_HOME ${PROJECT_BASE_DIR}/spark-${SPARK_VERSION}-bin-hadoop${HADOOP_VERSION}
ENV SPARK_MASTER_HOST spark-master
ENV SPARK_MASTER_PORT 7077
ENV SPARK_SCALA_VERSION ${SCALA_VERSION}
ENV MAIN_CLASS ${ARG_MAIN_CLASS}
ENV JAR ${ARG_JAR}

COPY ${JAR} ${PROJECT_BASE_DIR}/
